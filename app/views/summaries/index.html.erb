<div class="container py-4">
  <div class="d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4">
    <div>
      <h1 class="h3 mb-1">Resúmenes de <%= @data_collection.name %></h1>
      <p class="text-muted mb-0">Síntesis generadas automáticamente con los datos confirmados.</p>
    </div>
    <div class="d-flex flex-wrap gap-2">
      <%= link_to 'Ver conversación', risk_assistant_path(@data_collection), class: 'btn btn-outline-primary' %>
      <%= link_to 'Volver a tomas de datos', data_collections_path, class: 'btn btn-outline-secondary' %>
    </div>
  </div>

  <% if notice %>
    <div class="alert alert-success"><%= notice %></div>
  <% end %>
  <% if alert %>
    <div class="alert alert-danger"><%= alert %></div>
  <% end %>

  <% if @summaries.present? %>
    <div class="row row-cols-1 g-3">
      <% @summaries.each do |summary| %>
        <div class="col">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <span class="badge text-bg-primary">Resumen</span>
                <small class="text-muted"><%= l summary.created_at, format: :short %></small>
              </div>
              <pre class="mb-0 small text-wrap"><%= summary.content.presence || 'Sin contenido disponible.' %></pre>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-5 border rounded bg-light-subtle">
      <p class="mb-2 fw-semibold">Todavía no hay resúmenes generados.</p>
      <p class="mb-0 text-muted">Continúa la conversación con el asistente para producir un resumen automático.</p>
    </div>
  <% end %>
</div>